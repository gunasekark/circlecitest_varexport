machine:
  python:
    version: 2.7.12
dependencies:
  pre:
    # update locally with:
    # openssl aes-256-cbc -e -in secret-env-plain -out secret-env-cipher -k $KEY
    - openssl aes-256-cbc -d -in secret-env-cipher -k $KEY >> ~/.circlerc
compile:
  override:
     - echo 'hello world'
     - echo $ABC
     - |
        CDE=${ABC}
        echo $CDE
     - 'ls -l ~/'
     - 'aws --version'
    # - 'ls -l ~/.aws/'
deployment:
  branch: dev
  commands:
       - echo ${DEV_AWS_KEY}
       - |
          export AWS_ACCESS_KEY_ID=${DEV_AWS_KEY}
          export AWS_SECRET_ACCESS_KEY=${DEV_AWS_SECRET}
          export AWS_DEFAULT_REGION=${DEV_AWS_REGION}
          echo $AWS_ACCESS_KEY_ID
          echo $AWS_SECRET_ACCESS_KEY
          echo $AWS_DEFAULT_REGION
          aws --debug s3 sync ~/circlecitest_varexport/dist s3://s3awscddev2 --delete
test:
  override:
     - python nosetest.py
